<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>통합 관리 시스템 (ERP + ISO)</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <header>
        <h1>통합 관리 시스템 (ERP + ISO)</h1>
        <div class="header-right" id="header-logged-in" style="display: none;">
            <span class="user-info">사용자 (부서)</span>
            <button class="header-button logout-button">로그아웃</button>
        </div>
        <div class="header-right" id="header-logged-out" style="display: block;">
            <button class="header-button login-button">로그인</button>
            <button class="header-button signup-button" onclick="openModal('signup-modal')">회원가입</button>
        </div>
    </header>

    <div class="dashboard-container">
        <aside class="sidebar">
            <nav>
                <ul>
                    <li><a href="#dashboard-overview" class="active"><span class="icon">🏠</span>대시보드</a></li>

                    <li><a href="#settings"><span class="icon">⚙️</span>기본 설정</a>
                        <ul>
                            <li><a href="#company-mgmt">기업 관리</a></li>
                            <li><a href="#user-mgmt">인원 관리</a></li>
                            <li><a href="#partner-mgmt">거래처 관리</a></li>
                            <li><a href="#item-mgmt">품목 관리</a></li>
                        </ul>
                    </li>

                    <li><a href="#sales-mgmt"><span class="icon">💼</span>영업 관리</a>
                        <ul>
                            <li><a href="#customer-mgmt">고객 관리</a></li>
                            <li><a href="#quote-mgmt">견적 관리</a></li>
                            <li><a href="#order-mgmt">주문 관리</a></li>
                        </ul>
                    </li>

                    <li><a href="#purchase-mgmt"><span class="icon">🛒</span>구매 관리</a>
                        <ul>
                            <li><a href="#supplier-mgmt">공급처 관리</a></li>
                            <li><a href="#purchase-request-mgmt">구매 요청</a></li>
                            <li><a href="#purchase-order-mgmt">구매 발주</a></li>
                        </ul>
                    </li>

                    <li><a href="#inventory-mgmt"><span class="icon">📦</span>재고 관리</a>
                        <ul>
                            <li><a href="#item-list">품목 조회</a></li>
                            <li><a href="#inventory-receipt">입고 관리</a></li>
                            <li><a href="#inventory-issue">출고 관리</a></li>
                            <li><a href="#inventory-status">재고 현황</a></li>
                        </ul>
                    </li>

                    <li><a href="#production-mgmt"><span class="icon">🏭</span>생산 관리</a>
                        <ul>
                            <li><a href="#bom-mgmt">BOM 관리</a></li>
                            <li><a href="#workorder-mgmt">작업 지시</a></li>
                            <li><a href="#production-result">생산 실적</a></li>
                            <li><a href="#equipment-mgmt">설비 관리</a></li>
                        </ul>
                    </li>

                    <li><a href="#quality-mgmt"><span class="icon">✅</span>품질 관리</a>
                        <ul>
                            <li><a href="#inspection-standard">검사기준서</a></li>
                            <li><a href="#incoming-inspection">수입검사</a></li>
                            <li><a href="#inprocess-inspection">공정검사</a></li>
                            <li><a href="#outgoing-inspection">출하검사</a></li>
                            <li><a href="#inspection-equip-mgmt">검사장비 관리</a></li>
                            <li><a href="#nonconformity-mgmt">부적합관리</a></li>
                        </ul>
                    </li>

                    <li><a href="#safety-mgmt"><span class="icon">🛡️</span>안전 관리</a>
                        <ul>
                            <li><a href="#risk-assessment">위험성평가</a></li>
                            <li><a href="#safety-equipment">안전보호구지급</a></li>
                        </ul>
                    </li>

                    <li><a href="#business-mgmt"><span class="icon">📈</span>경영 관리</a>
                        <ul>
                            <li><a href="#policy">방침관리</a></li>
                            <li><a href="#objectives">목표관리</a></li>
                            <li><a href="#org-chart">조직도</a></li>
                            <li><a href="#risk-mgmt">RISK관리</a></li>
                            <li><a href="#training">교육훈련</a></li>
                            <li><a href="#qualification">자격인정</a></li>
                            <li><a href="#partner-eval">협력업체평가</a></li>
                            <li><a href="#proposal">제안서</a></li>
                            <li><a href="#internal-audit">내부심사</a></li>
                            <li><a href="#mgmt-review">경영검토</a></li>
                        </ul>
                    </li>

                    <li><a href="#doc-management"><span class="icon">📄</span>문서 관리</a>
                        <ul>
                            <li><a href="#manuals">매뉴얼</a></li>
                            <li><a href="#procedures">절차서</a></li>
                            <li><a href="#forms">기록 양식</a></li>
                        </ul>
                    </li>

                    <li><a href="#record-management"><span class="icon">📝</span>기록 관리</a>
                        <ul>
                            <li><a href="#records">기록 조회</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <section id="dashboard-overview-view">  <h2><span class="icon">🏠</span> 대시보드 개요</h2>
                <p>주요 지표 및 업무 현황을 요약하여 보여줍니다.</p>
                <div class="kpi-grid" style="..."> <div class="kpi-card" style="...">
                        <h3 style="...">오늘의 주문</h3>
                        <p style="..." id="db-kpi-today-orders"> 0 건 </p> <div style="..."> <a href="#" onclick="navigateToSection('order-mgmt', {date: 'today'}); return false;" style="...">상세보기 &raquo;</a> </div>
                    </div>
                    </div>
                <hr style="...">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px;">
                    <div style="...">
                        <h3 style="..."> <span class="icon">📅</span> 나의 할 일 목록 (오늘) </h3>
                        <ul id="dashboard-todo-list" style="...">
                            </ul>
                    </div>
                    </div>
            </section>
            </main>
    </div>

    <div id="signup-modal" class="modal">
        <div class="modal-content small">
            <span class="close-button" onclick="closeModal('signup-modal')">&times;</span>
            <h2>관리자 회원가입 (기업 정보 등록)</h2>

            <form id="signup-form" enctype="multipart/form-data">

                <div class="form-row">
                    <div class="form-group"><label for="signup-company-name">기업명:</label><input type="text"
                            id="signup-company-name" name="companyName" required></div>
                    <div class="form-group"><label for="signup-biz-reg-num">사업자등록번호:</label><input type="text"
                            id="signup-biz-reg-num" name="businessRegistrationNumber" placeholder="예: 123-45-67890"
                            required></div>
                </div>
                <div class="form-group full-width"><label for="signup-address">주소:</label><input type="text"
                        id="signup-address" name="address" required></div>
                <div class="form-row">
                    <div class="form-group"><label for="signup-ceo">대표자:</label><input type="text" id="signup-ceo"
                            name="ceoName" required></div>
                    <div class="form-group"><label for="signup-main-product">주 생산품:</label><input type="text"
                            id="signup-main-product" name="mainProducts"></div>
                </div>
                <hr>
                <h4>관리자 정보</h4>
                <div class="form-group full-width"><label for="signup-admin-name">관리자 이름:</label><input type="text"
                        id="signup-admin-name" name="adminName" required></div>
                <div class="form-row">
                    <div class="form-group"><label for="signup-tel">연락처:</label><input type="tel" id="signup-tel"
                            name="phoneNumber" placeholder="예: 010-1234-5678" required></div>
                    <div class="form-group"><label for="signup-fax">FAX:</label><input type="tel" id="signup-fax"
                            name="faxNumber" placeholder="예: 02-123-4568"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label for="signup-email">이메일(ID):</label><input type="email"
                            id="signup-email" name="email" required></div>
                    <div class="form-group"><label for="signup-password">비밀번호:</label><input type="password"
                            id="signup-password" name="password" required></div>
                    <div class="form-group"><label for="signup-confirm-password">비밀번호 확인:</label><input type="password"
                            id="signup-confirm-password" name="confirmPassword" required></div>
                </div>
                <div class="form-group full-width"><label for="signup-seal-image">도장 이미지:</label><input type="file"
                        id="signup-seal-image" name="sealImage" accept="image/*"></div>
                <div style="margin-top: 25px; text-align: center;"><button type="submit">가입하기</button><button
                        type="button" class="logout-button" onclick="closeModal('signup-modal')">취소</button></div>

            </form>
        </div>
    </div>

    <div id="edit-company-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('edit-company-modal')">&times;</span>
            <h2>기업 정보 수정</h2>
            <form id="edit-company-form" enctype="multipart/form-data">
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-company-name">기업명:</label>
                        <input type="text" id="edit-company-name" name="companyName" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-biz-reg-num">사업자등록번호:</label>
                        <input type="text" id="edit-biz-reg-num" name="businessRegistrationNumber"
                            placeholder="예: 123-45-67890" required>
                    </div>
                </div>
                <div class="form-group full-width">
                    <label for="edit-address">주소:</label>
                    <input type="text" id="edit-address" name="address" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-ceo">대표자:</label>
                        <input type="text" id="edit-ceo" name="ceoName" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-main-product">주 생산품:</label>
                        <input type="text" id="edit-main-product" name="mainProducts">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-tel">연락처:</label>
                        <input type="tel" id="edit-tel" name="phoneNumber" placeholder="예: 064-123-4567" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-fax">FAX:</label>
                        <input type="tel" id="edit-fax" name="faxNumber" placeholder="예: 064-123-4568">
                    </div>
                </div>
                <div class="form-group full-width">
                    <label for="edit-seal-image">도장 이미지 변경:</label>
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                        <img id="edit-current-seal-preview" src="placeholder_seal.png" alt="현재 도장"
                            style="max-width: 60px; max-height: 60px; border: 1px solid #eee; padding: 3px; display: none;">
                        <input type="file" id="edit-seal-image" name="sealImage" accept="image/*" style="flex-grow: 1;">
                    </div>
                    <small>(새 파일을 첨부하면 기존 이미지가 교체됩니다. 현재 이미지는 미리보기에 표시됩니다.)</small>
                </div>
                <div style="margin-top: 25px; text-align: center;">
                    <button type="submit">수정 내용 저장</button>
                    <button type="button" class="logout-button" onclick="closeModal('edit-company-modal')">취소</button>
                </div>
            </form>
        </div>
    </div>
    <div id="add-user-modal" class="modal">
        <div class="modal-content small">
            <span class="close-button" onclick="closeModal('add-user-modal')">&times;</span>
            <form id="add-user-form">
                <input type="hidden" id="edit-user-id" name="userIdToEdit">
                <h2>인원 추가/수정</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-user-name">성명:</label>
                        <input type="text" id="add-user-name" name="userName" required>
                    </div>
                    <div class="form-group">
                        <label for="add-user-id">아이디:</label>
                        <input type="text" id="add-user-id" name="userId" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-user-password">비밀번호:</label>
                        <input type="password" id="add-user-password" name="password"> <small>(수정 시에는 변경할 경우에만
                            입력)</small>
                    </div>
                    <div class="form-group">
                        <label for="add-user-confirm-password">비밀번호 확인:</label>
                        <input type="password" id="add-user-confirm-password" name="confirmPassword">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-user-dept">부서:</label>
                        <input type="text" id="add-user-dept" name="department" required>
                    </div>
                    <div class="form-group">
                        <label for="add-user-role">등급:</label>
                        <select id="add-user-role" name="userRole" required>
                            <option value="">-- 등급 선택 --</option>
                            <option value="DocManager">문서 관리자</option>
                            <option value="RecordCreator">기록 작성자</option>
                            <option value="Reviewer">검토자/승인자</option>
                            <option value="Admin">시스템 관리자</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-user-status">상태:</label>
                        <select id="add-user-status" name="userStatus" required>
                            <option value="Active">승인</option>
                            <option value="Pending">대기</option>
                            <option value="Inactive">퇴사</option>
                        </select>
                    </div>
                    <div class="form-group">
                    </div>
                </div>
                <div style="margin-top: 25px; text-align: center;">
                    <button type="submit">저장</button>
                    <button type="button" class="logout-button" onclick="closeModal('add-user-modal')">취소</button>
                </div>
            </form>
        </div>
    </div>
    <div id="view-user-modal" class="modal">
        <div class="modal-content small"> <span class="close-button" onclick="closeModal('view-user-modal')">&times;</span>
          <h2>사용자 상세 정보</h2>
      
          <dl class="user-info-list"> <dt>성명</dt>
            <dd id="view-user-name">[로딩...]</dd>
      
            <dt>아이디</dt>
            <dd id="view-user-id">[로딩...]</dd>
      
            <dt>부서</dt>
            <dd id="view-user-dept">[로딩...]</dd>
      
            <dt>등급</dt>
            <dd id="view-user-role">[로딩...]</dd>
      
            <dt>상태</dt>
            <dd id="view-user-status">[로딩...]</dd>
      
            <dt>등록일자</dt>
            <dd id="view-user-reg-date">[로딩...]</dd>
      
            <dt>최종로그인</dt>
            <dd id="view-user-last-login">[로딩...]</dd>
          </dl>
      
          <div style="text-align: right; margin-top: 20px;">
            <button type="button" class="cancel-button" onclick="closeModal('view-user-modal')">닫기</button>
          </div>
        </div>
      </div>
      
    <div id="add-partner-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('add-partner-modal')">&times;</span>
            <form id="add-partner-form">
                <input type="hidden" id="edit-partner-id" name="partnerIdToEdit">
                <h2>신규 거래처 추가/수정</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-partner-name">거래처명:</label>
                        <input type="text" id="add-partner-name" name="partnerName" required>
                    </div>
                    <div class="form-group">
                        <label for="add-partner-type">거래 구분:</label>
                        <select id="add-partner-type" name="partnerType" required>
                            <option value="">-- 선택 --</option>
                            <option value="Supplier">공급사</option>
                            <option value="Customer">고객사</option>
                            <option value="Subcontractor">외주업체</option>
                            <option value="Etc">기타</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-partner-biz-num">사업자등록번호:</label>
                        <input type="text" id="add-partner-biz-num" name="businessRegNumber"
                            placeholder="예: 123-45-67890">
                    </div>
                    <div class="form-group">
                        <label for="add-partner-items">주요 품목/서비스:</label>
                        <input type="text" id="add-partner-items" name="mainItems">
                    </div>
                </div>
                <div class="form-group full-width">
                    <label for="add-partner-address">주소:</label>
                    <input type="text" id="add-partner-address" name="address">
                </div>
                <hr>
                <h4>담당자 정보</h4>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-partner-contact-person">담당자명:</label>
                        <input type="text" id="add-partner-contact-person" name="contactPerson">
                    </div>
                    <div class="form-group">
                        <label for="add-partner-tel">연락처:</label>
                        <input type="tel" id="add-partner-tel" name="phoneNumber" placeholder="예: 02-1234-5678">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-partner-email">이메일:</label>
                        <input type="email" id="add-partner-email" name="email" placeholder="예: contact@partner.com">
                    </div>
                    <div class="form-group">
                        <label for="add-partner-fax">팩스:</label>
                        <input type="tel" id="add-partner-fax" name="faxNumber">
                    </div>
                </div>
                <hr>
                <div class="form-group full-width">
                    <label for="add-partner-notes">비고:</label>
                    <textarea id="add-partner-notes" name="notes" rows="3" style="min-height: 60px;"></textarea>
                </div>
                <div class="form-group full-width">
                    <label for="add-partner-reg-date">등록일:</label>
                    <input type="date" id="add-partner-reg-date" name="registrationDate" style="width: 150px;">
                    <small>(수정 시에는 보통 변경하지 않음)</small>
                </div>

                <div style="margin-top: 25px; text-align: center;">
                    <button type="submit">저장</button>
                    <button type="button" class="logout-button" onclick="closeModal('add-partner-modal')">취소</button>
                </div>
            </form>
        </div>
    </div>
    <div id="view-partner-details-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('view-partner-details-modal')">&times;</span>
            <h2>거래처 상세 정보</h2>

            <dl style="display: grid; grid-template-columns: auto 1fr; gap: 8px 15px; margin-top: 15px;">
                <dt style="font-weight: bold; text-align: right;">ID:</dt>
                <dd><span id="view-partner-id">-</span></dd>

                <dt style="font-weight: bold; text-align: right;">거래처명:</dt>
                <dd><span id="view-partner-name">-</span></dd>

                <dt style="font-weight: bold; text-align: right;">거래 구분:</dt>
                <dd><span id="view-partner-type">-</span></dd>

                <dt style="font-weight: bold; text-align: right;">사업자등록번호:</dt>
                <dd><span id="view-partner-biz-num">-</span></dd>

                <dt style="font-weight: bold; text-align: right;">주요 품목/서비스:</dt>
                <dd><span id="view-partner-items">-</span></dd>

                <dt style="font-weight: bold; text-align: right;">주소:</dt>
                <dd><span id="view-partner-address">-</span></dd>

                <dt style="font-weight: bold; text-align: right;">담당자명:</dt>
                <dd><span id="view-partner-contact-person">-</span></dd>

                <dt style="font-weight: bold; text-align: right;">연락처:</dt>
                <dd><span id="view-partner-tel">-</span></dd>

                <dt style="font-weight: bold; text-align: right;">이메일:</dt>
                <dd><span id="view-partner-email">-</span></dd>

                <dt style="font-weight: bold; text-align: right;">팩스:</dt>
                <dd><span id="view-partner-fax">-</span></dd>

                <dt style="font-weight: bold; text-align: right;">등록일:</dt>
                <dd><span id="view-partner-reg-date">-</span></dd>

                <dt style="font-weight: bold; text-align: right; grid-column: 1;">비고:</dt>
                <dd style="grid-column: 2; white-space: pre-wrap;"><span id="view-partner-notes">-</span></dd>
            </dl>

            <div style="margin-top: 30px; text-align: center;">
                <button type="button" class="logout-button"
                    onclick="closeModal('view-partner-details-modal')">닫기</button>
            </div>
        </div>
    </div>
    <div id="add-item-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('add-item-modal')">&times;</span>
            <h2 id="item-modal-title">신규 품목 추가</h2>
            <form id="add-item-form" enctype="multipart/form-data">
                <input type="hidden" id="edit-item-id" name="itemIdToEdit">

                <div class="form-row">
                    <div class="form-group">
                        <label for="add-item-type">품목 구분:</label>
                        <select id="add-item-type" name="itemType" required onchange="handleItemTypeChange()">
                            <option value="">-- 구분 선택 --</option>
                            <option value="RawMaterial">원자재</option>
                            <option value="SemiFinished">반제품</option>
                            <option value="Product">제품(완제품)</option>
                            <option value="Equipment">설비</option>
                            <option value="InspectionEquipment">검사장비</option>
                            <option value="Etc">기타 품목</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="add-item-code">품목 코드/관리번호:</label> <input type="text" id="add-item-code"
                            name="itemCode" required>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label for="add-item-name">품목명/설비명:</label> <input type="text" id="add-item-name" name="itemName"
                        required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="add-item-spec">규격/모델명:</label> <input type="text" id="add-item-spec" name="itemSpec"
                            placeholder="예: Model-X, 10x20mm, Red">
                    </div>
                    <div class="form-group">
                        <label for="add-item-unit">단위:</label>
                        <input type="text" id="add-item-unit" name="itemUnit" required placeholder="예: EA, kg, m, 대, 개">
                    </div>
                </div>

                <div id="raw-material-fields"
                    style="display: none; border: 1px dashed #ccc; padding: 10px 15px; margin-bottom: 15px; border-radius: 4px;">
                    <h4 style="margin-top: 0; margin-bottom: 10px; font-size: 1em; color: #0056b3;">원자재 추가 정보</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="add-item-purchase-price">구매 단가:</label>
                            <input type="number" id="add-item-purchase-price" name="purchasePrice" step="any"
                                placeholder="숫자만 입력">
                        </div>
                        <div class="form-group">
                            <label for="add-item-supplier">주 공급처:</label>
                            <input type="text" id="add-item-supplier" name="supplierName" placeholder="공급처 이름 입력">
                            <input type="hidden" id="add-item-supplier-id" name="supplierId">
                        </div>
                    </div>
                </div>

                <div id="product-fields"
                    style="display: none; border: 1px dashed #ccc; padding: 10px 15px; margin-bottom: 15px; border-radius: 4px;">
                    <h4 style="margin-top: 0; margin-bottom: 10px; font-size: 1em; color: #28a745;">제품(완제품) 추가 정보</h4>
                    <div class="form-group">
                        <label for="add-item-selling-price">판매 단가:</label>
                        <input type="number" id="add-item-selling-price" name="sellingPrice" step="any"
                            placeholder="숫자만 입력">
                    </div>
                </div>

                <div id="semifinished-fields"
                    style="display: none; border: 1px dashed #ccc; padding: 10px 15px; margin-bottom: 15px; border-radius: 4px;">
                    <h4 style="margin-top: 0; margin-bottom: 10px; font-size: 1em; color: #fd7e14;">반제품 추가 정보</h4>
                    <p style="text-align: center; color: #6c757d; margin: 0;">(현재 반제품 고유 필드 없음)</p>
                </div>

                <div id="equipment-fields"
                    style="display: none; border: 1px dashed #ccc; padding: 10px 15px; margin-bottom: 15px; border-radius: 4px;">
                    <h4 style="margin-top: 0; margin-bottom: 10px; font-size: 1em; color: #6f42c1;">설비 추가 정보</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="add-equip-supplier-form">구입처:</label>
                            <input type="text" id="add-equip-supplier-form" name="equipmentSupplierName"
                                placeholder="거래처 이름 입력">
                        </div>
                        <div class="form-group">
                            <label for="add-equip-power-form">전기사용량 (kW):</label>
                            <input type="number" id="add-equip-power-form" name="powerConsumption" step="0.1"
                                placeholder="예: 5.5">
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label for="add-equip-resp-dept-form">책임 부서:</label>
                        <input type="text" id="add-equip-resp-dept-form" name="responsibleDepartment">
                    </div>
                </div>

                <div id="inspection-equipment-fields"
                    style="display: none; border: 1px dashed #ccc; padding: 10px 15px; margin-bottom: 15px; border-radius: 4px;">
                    <h4 style="margin-top: 0; margin-bottom: 10px; font-size: 1em; color: #dc3545;">검사장비 추가 정보</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="add-insp-equip-manufacturer-form">제조사:</label>
                            <input type="text" id="add-insp-equip-manufacturer-form" name="manufacturer">
                        </div>
                        <div class="form-group">
                            <label for="add-insp-equip-cycle-form">교정주기:</label>
                            <input type="text" id="add-insp-equip-cycle-form" name="calibrationCycle"
                                placeholder="예: 12개월, 자체점검">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="add-insp-equip-last-cal-form">최종교정일:</label>
                            <input type="date" id="add-insp-equip-last-cal-form" name="lastCalibrationDate">
                        </div>
                        <div class="form-group">
                            <label for="add-insp-equip-status-form">교정 상태:</label>
                            <select id="add-insp-equip-status-form" name="calibrationStatus">
                                <option value="Normal">정상</option>
                                <option value="Scheduled">교정 예정</option>
                                <option value="Delayed">교정 지연</option>
                                <option value="Excluded">교정 제외</option>
                                <option value="Repair">수리중</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label for="add-insp-equip-resp-dept-form">책임 부서:</label>
                        <input type="text" id="add-insp-equip-resp-dept-form" name="responsibleDepartment">
                    </div>
                </div>

                <div class="form-group full-width">
                    <label for="add-item-image">품목 이미지:</label>
                    <input type="file" id="add-item-image" name="itemImage" accept="image/*">
                </div>

                <div class="form-group full-width">
                    <label for="add-item-notes">비고:</label>
                    <textarea id="add-item-notes" name="notes" rows="2" style="min-height: 50px;"></textarea>
                </div>

                <div class="form-group full-width">
                    <label for="add-item-reg-date">등록일:</label>
                    <input type="date" id="add-item-reg-date" name="registrationDate" style="width: 150px;">
                    <small>(수정 시에는 보통 변경하지 않음)</small>
                </div>

                <div style="margin-top: 25px; text-align: center;">
                    <button type="submit">저장</button>
                    <button type="button" class="logout-button" onclick="closeModal('add-item-modal')">취소</button>
                </div>
            </form>
        </div>
    </div>
    <div id="bom-child-item-search-modal" class="modal">
        <div class="modal-content large">
            <span class="close-button" onclick="closeModal('bom-child-item-search-modal')">&times;</span>
            <h2>하위 품목 검색 (원자재/반제품)</h2>

            <div class="filter-area" style="margin-bottom: 15px;">
                <input type="text" id="bom-child-search-input" placeholder="품목 코드 또는 이름 검색..." style="width: 300px;">
                <button onclick="searchBomChildItems()">검색</button>
            </div>

            <div style="max-height: 400px; overflow-y: auto;">
                <table id="bom-child-item-search-table">
                    <thead>
                        <tr>
                            <th>품목 코드</th>
                            <th>품목명</th>
                            <th>규격</th>
                            <th>단위</th>
                            <th>구분</th>
                            <th>선택</th>
                        </tr>
                    </thead>
                    <tbody id="bom-child-item-search-results">
                        <tr>
                            <td colspan="6" style="text-align:center;">검색어를 입력하고 검색 버튼을 누르세요.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div style="margin-top: 20px; text-align: right;">
                <button type="button" class="logout-button"
                    onclick="closeModal('bom-child-item-search-modal')">닫기</button>
            </div>
        </div>
    </div>
    <div id="view-item-details-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('view-item-details-modal')">&times;</span>
            <h2>품목 상세 정보</h2>

            <dl style="display: grid; grid-template-columns: auto 1fr; gap: 8px 15px; margin-top: 15px;">
                <dt style="font-weight: bold; text-align: right;">ID:</dt>
                <dd id="view-item-id">-</dd>

                <dt style="font-weight: bold; text-align: right;">품목 구분:</dt>
                <dd id="view-item-type">-</dd>

                <dt style="font-weight: bold; text-align: right;">품목 코드:</dt>
                <dd id="view-item-code">-</dd>

                <dt style="font-weight: bold; text-align: right;">품목명:</dt>
                <dd id="view-item-name">-</dd>

                <dt style="font-weight: bold; text-align: right;">규격:</dt>
                <dd id="view-item-spec">-</dd>

                <dt style="font-weight: bold; text-align: right;">단위:</dt>
                <dd id="view-item-unit">-</dd>

                <div id="view-item-raw-details" style="display: contents;">
                    <dt style="font-weight: bold; text-align: right;">구매 단가:</dt>
                    <dd id="view-item-purchase-price">-</dd>
                    <dt style="font-weight: bold; text-align: right;">주 공급처:</dt>
                    <dd id="view-item-supplier">-</dd>
                </div>

                <div id="view-item-product-details" style="display: contents;">
                    <dt style="font-weight: bold; text-align: right;">판매 단가:</dt>
                    <dd id="view-item-selling-price">-</dd>
                </div>

                <div id="view-item-equipment-details" style="display: contents;">
                    <dt style="font-weight: bold; text-align: right;">구입처:</dt>
                    <dd id="view-equip-supplierName-in-item">-</dd>
                    <dt style="font-weight: bold; text-align: right;">전기사용량:</dt>
                    <dd id="view-equip-power-in-item">-</dd>
                    <dt style="font-weight: bold; text-align: right;">책임부서:</dt>
                    <dd id="view-equip-resp-dept-in-item">-</dd>
                </div>

                <div id="view-item-inspection-equipment-details" style="display: contents;">
                    <dt style="font-weight: bold; text-align: right;">제조사:</dt>
                    <dd id="view-insp-equip-manufacturer-in-item">-</dd>
                    <dt style="font-weight: bold; text-align: right;">교정주기:</dt>
                    <dd id="view-insp-equip-calibrationCycle-in-item">-</dd>
                    <dt style="font-weight: bold; text-align: right;">최종교정일:</dt>
                    <dd id="view-insp-equip-lastCalibrationDate-in-item">-</dd>
                    <dt style="font-weight: bold; text-align: right;">차기교정예정일:</dt>
                    <dd id="view-insp-equip-nextCalibrationDate-in-item">-</dd>
                    <dt style="font-weight: bold; text-align: right;">교정 상태:</dt>
                    <dd id="view-insp-equip-calibrationStatus-in-item" style="font-weight: bold;">-</dd>
                    <dt style="font-weight: bold; text-align: right;">책임 부서:</dt>
                    <dd id="view-insp-equip-resp-dept-in-item">-</dd>
                </div>

                <dt style="font-weight: bold; text-align: right;">등록일:</dt>
                <dd id="view-item-reg-date">-</dd>

                <dt style="font-weight: bold; text-align: right; grid-column: 1;">이미지:</dt>
                <dd style="grid-column: 2;"><img id="view-item-image" src="placeholder_item.png" alt="품목 이미지"
                        style="max-width: 100px; max-height: 100px;"></dd>

                <dt style="font-weight: bold; text-align: right; grid-column: 1;">비고:</dt>
                <dd style="grid-column: 2; white-space: pre-wrap;" id="view-item-notes">-</dd>
            </dl>

            <div style="margin-top: 30px; text-align: center;">
                <button type="button" class="logout-button" onclick="closeModal('view-item-details-modal')">닫기</button>
            </div>
        </div>
    </div>
    <div id="bom-registration-modal" class="modal">
        <div class="modal-content large">
            <span class="close-button" onclick="closeModal('bom-registration-modal')">&times;</span>
            <h2 id="bom-modal-title">BOM 정보: [대상 품목명]</h2>

            <div
                style="background-color: #f8f9fa; padding: 10px 15px; border-radius: 5px; margin-bottom: 20px; border: 1px solid #dee2e6; font-size: 0.9em;">
                <div style="display: flex; justify-content: space-between;">
                    <div>
                        <span style="font-weight: bold;">품번:</span> <span id="bom-parent-item-code">[코드]</span> |
                        <span style="font-weight: bold;">모델명:</span> <span id="bom-parent-item-model">[모델명]</span> |
                        <span style="font-weight: bold;">규격:</span> <span id="bom-parent-item-spec">[규격]</span>
                        <input type="hidden" id="bom-parent-item-id">
                    </div>
                    <div>
                        <span style="font-weight: bold;">단위:</span> <span id="bom-parent-item-unit-info">[단위]</span>
                    </div>
                </div>
            </div>

            <h4 style="margin-top: 0; margin-bottom: 10px;">구성 품목 (하위 품목)</h4>
            <table id="bom-items-table" style="margin-top: 0;">
                <thead>
                    <tr>
                        <th style="width: 5%;">No</th>
                        <th style="width: 10%;">자재 구분</th>
                        <th style="width: 20%;">품번/코드</th>
                        <th style="width: 20%;">자재명/품명</th>
                        <th style="width: 15%;">모델명/규격</th>
                        <th style="width: 8%;">단위</th>
                        <th style="width: 8%;">소요량</th>
                        <th style="width: 8%;">비고</th>
                        <th style="width: 6%;">관리</th>
                    </tr>
                </thead>
                <tbody id="bom-items-table-body">
                </tbody>
            </table>
            <button type="button" onclick="addBomItemRow()"
                style="margin-top: 10px; background-color: #6c757d; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">+
                구성품 추가</button>

            <div style="margin-top: 30px; text-align: center;">
                <button type="button" onclick="saveBom()" class="write-button">BOM 저장</button>
                <button type="button" class="logout-button" onclick="closeModal('bom-registration-modal')">닫기</button>
            </div>
        </div>
    </div>
    <div id="add-equipment-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('add-equipment-modal')">&times;</span>
            <form id="add-equipment-form" enctype="multipart/form-data">
                <input type="hidden" id="edit-equipment-id" name="itemIdToEdit">
                <h2>신규 설비 추가/수정</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="add-equip-name">설비명:</label>
                        <input type="text" id="add-equip-name" name="itemName" required>
                    </div>
                    <div class="form-group">
                        <label for="add-equip-model">모델명:</label>
                        <input type="text" id="add-equip-model" name="itemSpec">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-equip-number">설비번호:</label>
                        <input type="text" id="add-equip-number" name="itemCode" required>
                    </div>
                    <div class="form-group">
                        <label for="add-equip-supplier">구입처:</label>
                        <input type="text" id="add-equip-supplier" name="supplierName" placeholder="거래처 이름 입력">
                        <input type="hidden" id="add-equip-supplier-id" name="supplierId">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-equip-power">전기사용량 (kW):</label>
                        <input type="number" id="add-equip-power" name="powerConsumption" step="0.1"
                            placeholder="예: 5.5">
                    </div>
                    <div class="form-group">
                        <label for="add-equip-reg-date">등록일:</label>
                        <input type="date" id="add-equip-reg-date" name="registrationDate">
                        <small>(수정 시에는 보통 변경하지 않음)</small>
                    </div>
                </div>
                <div class="form-group full-width">
                    <label for="add-equip-notes">비고:</label>
                    <textarea id="add-equip-notes" name="notes" rows="2"></textarea>
                </div>
                <div class="form-group full-width">
                    <label for="add-equip-image">이미지 등록:</label>
                    <input type="file" id="add-equip-image" name="itemImage" accept="image/*">
                </div>
                <div style="margin-top: 25px; text-align: center;">
                    <button type="submit">저장</button>
                    <button type="button" class="logout-button" onclick="closeModal('add-equipment-modal')">취소</button>
                </div>
            </form>
        </div>
    </div>
    <div id="add-quote-modal" class="modal">
        <div class="modal-content large"> <span class="close-button"
                onclick="closeModal('add-quote-modal')">&times;</span>
            <h2 id="quote-modal-title">신규 견적 작성</h2> <input type="hidden" id="edit-quote-id" name="quoteIdToEdit">

            <div class="form-row">
                <div class="form-group">
                    <label for="add-quote-number">견적번호:</label>
                    <input type="text" id="add-quote-number" name="quoteNumber" readonly placeholder="자동 생성됩니다">
                </div>
                <div class="form-group">
                    <label for="add-quote-date">견적일자:</label>
                    <input type="date" id="add-quote-date" name="quoteDate" required>
                </div>
                <div class="form-group">
                    <label for="add-quote-expiry-date">유효기간:</label>
                    <input type="date" id="add-quote-expiry-date" name="expiryDate" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="add-quote-customer">고객사:</label>
                    <input type="text" id="add-quote-customer-name" name="customerName" placeholder="고객사 검색..."
                        required>
                    <input type="hidden" id="add-quote-customer-id" name="customerId">
                </div>
                <div class="form-group">
                    <label for="add-quote-rep">담당자(자사):</label>
                    <input type="text" id="add-quote-rep-name" name="representativeName" readonly>
                    <input type="hidden" id="add-quote-rep-id" name="representativeUserId">
                </div>
            </div>

            <hr>
            <h4>견적 품목</h4>
            <table id="quote-items-table" style="margin-top: 0;">
                <thead>
                    <tr>
                        <th style="width: 5%;">No</th>
                        <th style="width: 30%;">품목</th>
                        <th style="width: 15%;">규격</th>
                        <th style="width: 10%;">단위</th>
                        <th style="width: 10%;">수량</th>
                        <th style="width: 15%;">단가</th>
                        <th style="width: 15%;">금액</th>
                        <th style="width: 5%;">관리</th>
                    </tr>
                </thead>
                <tbody id="quote-items-table-body">
                </tbody>
            </table>
            <button type="button" onclick="openModal('quote-item-search-modal')"
                style="margin-top: 10px; background-color: #6c757d; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">+
                품목 추가</button>

            <hr>
            <div class="form-row">
                <div class="form-group">
                    <label for="add-quote-total-amount">총액:</label>
                    <input type="text" id="add-quote-total-amount" name="totalAmount" readonly
                        style="font-weight: bold; text-align: right;">
                </div>
                <div class="form-group">
                    <label for="add-quote-status">견적 상태:</label>
                    <select id="add-quote-status" name="quoteStatus">
                        <option value="Draft">작성중</option>
                        <option value="Sent">전송됨</option>
                    </select>
                </div>
            </div>

            <div class="form-group full-width">
                <label for="add-quote-notes">비고:</label>
                <textarea id="add-quote-notes" name="notes" rows="3"></textarea>
            </div>

            <div style="margin-top: 25px; text-align: center;">
                <button type="submit">견적 저장</button> <button type="button" class="logout-button"
                    onclick="closeModal('add-quote-modal')">취소</button>
            </div>
        </div>
    </div>
    <div id="view-quote-details-modal" class="modal">
        <div class="modal-content large">
            <span class="close-button" onclick="closeModal('view-quote-details-modal')">&times;</span>
            <h2>견적 상세 정보</h2>
            <div id="quote-details-content">
                <p>상세 정보를 불러오는 중...</p>
            </div>
            <div style="margin-top: 30px; text-align: center;">
                <button type="button" onclick="printQuote()">인쇄</button>
                <button type="button" class="write-button" onclick="convertToOrder()">주문으로 전환</button> <button
                    type="button" class="logout-button" onclick="closeModal('view-quote-details-modal')">닫기</button>
            </div>
        </div>
    </div>
    </div>
    <div id="add-order-modal" class="modal">
        <div class="modal-content large">
            <span class="close-button" onclick="closeModal('add-order-modal')">&times;</span>
            <h2 id="order-modal-title">신규 주문 등록</h2>
            <input type="hidden" id="edit-order-id" name="orderIdToEdit">
    
            <div class="form-row">
                <div class="form-group">
                    <label for="add-order-number">주문번호:</label>
                    <input type="text" id="add-order-number" name="orderNumber" readonly placeholder="자동 생성됩니다">
                </div>
                <div class="form-group">
                    <label for="add-order-date">주문일자:</label>
                    <input type="date" id="add-order-date" name="orderDate" required>
                </div>
                <div class="form-group">
                    <label for="add-order-delivery-date">납기요청일:</label>
                    <input type="date" id="add-order-delivery-date" name="requestedDeliveryDate" required>
                </div>
            </div>
    
            <div class="form-row">
                <div class="form-group">
                    <label for="add-order-customer-name">고객사:</label>
                    <input type="text" id="add-order-customer-name" name="customerName" placeholder="고객사 검색..." required>
                    <input type="hidden" id="add-order-customer-id" name="customerId">
                </div>
                <div class="form-group">
                    <label for="add-order-rep-name">담당자(자사):</label>
                    <input type="text" id="add-order-rep-name" name="representativeName" readonly>
                    <input type="hidden" id="add-order-rep-id" name="representativeUserId">
                </div>
            </div>
    
            <div class="form-group full-width">
                <label for="add-order-source-quote">관련 견적:</label>
                <input type="text" id="add-order-source-quote-number" name="sourceQuoteNumber" placeholder="관련 견적번호 검색/선택 (선택사항)">
                <input type="hidden" id="add-order-source-quote-id" name="sourceQuoteId">
            </div>
    
            <hr>
            <h4>주문 품목</h4>
    
            <div class="filter-area" style="margin-bottom: 10px;">
                 <button type="button" onclick="openModal('order-item-search-modal')">+ 품목 검색 추가</button>
                 </div>
    
            <div style="max-height: 300px; overflow-y: auto; margin-bottom: 15px; border: 1px solid #eee;">
                 <table id="order-items-table" style="width:100%;"> <thead>
                           <tr>
                               <th style="width: 5%;">No</th>
                               <th style="width: 30%;">품목</th>
                               <th style="width: 15%;">규격</th>
                               <th style="width: 10%;">단위</th>
                               <th style="width: 10%;">수량</th>
                               <th style="width: 15%;">단가</th>
                               <th style="width: 15%;">금액</th>
                               <th style="width: 5%;">관리</th>
                           </tr>
                      </thead>
                      <tbody id="order-items-table-body">
                           </tbody>
                 </table>
            </div>
    
            <hr>
    
            <div class="form-row">
                <div class="form-group">
                    <label for="add-order-status-display">주문 상태:</label>
                    <input type="text" id="add-order-status-display" name="orderStatusDisplay" value="접수 대기" readonly style="background-color: #e9ecef;">
                    <input type="hidden" id="add-order-status" name="orderStatus" value="Pending">
                </div>
                 <div class="form-group"> <label for="add-order-total-amount" style="margin-right: 5px;">총액:</label>
                     <input type="text" id="add-order-total-amount" name="totalAmount" value="0" readonly style="font-weight: bold; text-align: right; width: 150px;"> 원
                 </div>
            </div>
    
            <div class="form-group full-width">
                <label for="add-order-notes">비고:</label>
                <textarea id="add-order-notes" name="notes" rows="3" style="min-height: 60px;"></textarea>
            </div>
            <div style="margin-top: 25px; text-align: center;">
                <button type="submit">주문 저장</button> <button type="button" class="logout-button" onclick="closeModal('add-order-modal')">취소</button>
            </div>
    
        </div> </div> <div id="order-item-search-modal" class="modal large">
         <div class="modal-content">
              <span class="close-button" onclick="closeModal('order-item-search-modal')">&times;</span>
              <h2>주문 품목 검색 (제품)</h2>
              <div class="filter-area" style="margin-bottom: 15px;">
                   <input type="text" id="order-item-search-input" placeholder="품목 코드 또는 이름 검색..." style="width: 300px;">
                   <button type="button" onclick="searchOrderItems()">검색</button> </div>
              <div style="max-height: 400px; overflow-y: auto;">
                   <table id="order-item-search-table"> <thead>
                             <tr>
                                  <th style="width: 20%;">품목 코드</th>
                                  <th style="width: 30%;">품목명</th>
                                  <th style="width: 20%;">규격</th>
                                  <th style="width: 10%;">단위</th>
                                  <th style="width: 10%;">판매 단가</th>
                                  <th style="width: 10%;">선택</th>
                             </tr>
                        </thead>
                        <tbody id="order-item-search-results">
                             <tr>
                                  <td colspan="6" style="text-align:center;">검색어를 입력하고 검색 버튼을 누르세요. (제품만 검색됩니다)</td>
                             </tr>
                        </tbody>
                   </table>
              </div>
              <div style="margin-top: 20px; text-align: right;">
                   <button type="button" class="logout-button" onclick="closeModal('order-item-search-modal')">닫기</button>
              </div>
         </div>
    </div>

    <div id="quote-item-search-modal" class="modal large">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('quote-item-search-modal')">&times;</span>
            <h2>견적 품목 검색 (제품)</h2>

            <div class="filter-area" style="margin-bottom: 15px;">
                <input type="text" id="quote-item-search-input" placeholder="품목 코드 또는 이름 검색..." style="width: 300px;">
                <button type="button" onclick="searchQuoteItems()">검색</button>
            </div>
            <div style="max-height: 400px; overflow-y: auto;">
                <table id="quote-item-search-table">
                    <thead>
                        <tr>
                            <th style="width: 20%;">품목 코드</th>
                            <th style="width: 30%;">품목명</th>
                            <th style="width: 20%;">규격</th>
                            <th style="width: 10%;">단위</th>
                            <th style="width: 10%;">판매 단가</th>
                            <th style="width: 10%;">선택</th>
                        </tr>
                    </thead>
                    <tbody id="quote-item-search-results">
                        <tr>
                            <td colspan="6" style="text-align:center;">검색어를 입력하고 검색 버튼을 누르세요. (제품만 검색됩니다)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div style="margin-top: 20px; text-align: right;">
                <button type="button" class="logout-button" onclick="closeModal('quote-item-search-modal')">닫기</button>
            </div>
        </div>
    </div>
    <div id="view-order-details-modal" class="modal">
        <div class="modal-content large"> <span class="close-button"
                onclick="closeModal('view-order-details-modal')">&times;</span>
            <h2>주문 상세 정보</h2>
            <div id="order-details-content">
                <p>상세 정보를 불러오는 중...</p>
            </div>
            <div style="margin-top: 30px; text-align: center;">
                <button type="button" onclick="printOrder()">주문서 인쇄</button>
                <button type="button" class="logout-button" onclick="closeModal('view-order-details-modal')">닫기</button>
            </div>
        </div>
    </div>
    <div id="view-equipment-details-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('view-equipment-details-modal')">&times;</span>
            <h2>설비 상세 정보</h2>

            <dl
                style="display: grid; grid-template-columns: auto 1fr; gap: 8px 15px; margin-top: 15px; font-size: 0.95em;">
                <dt style="font-weight: bold; text-align: right;">ID:</dt>
                <dd id="view-equip-id">-</dd>

                <dt style="font-weight: bold; text-align: right;">설비번호:</dt>
                <dd id="view-equip-itemCode">-</dd>

                <dt style="font-weight: bold; text-align: right;">설비명:</dt>
                <dd id="view-equip-itemName">-</dd>

                <dt style="font-weight: bold; text-align: right;">모델명:</dt>
                <dd id="view-equip-itemSpec">-</dd>

                <dt style="font-weight: bold; text-align: right;">단위:</dt>
                <dd id="view-equip-itemUnit">-</dd>

                <dt style="font-weight: bold; text-align: right;">구입처:</dt>
                <dd id="view-equip-supplierName">-</dd>

                <dt style="font-weight: bold; text-align: right;">전기사용량:</dt>
                <dd id="view-equip-power">-</dd>

                <dt style="font-weight: bold; text-align: right;">등록일:</dt>
                <dd id="view-equip-registrationDate">-</dd>

                <dt style="font-weight: bold; text-align: right; grid-column: 1;">이미지:</dt>
                <dd style="grid-column: 2;">
                    <img id="view-equip-image" src="placeholder_item.png" alt="설비 이미지"
                        style="max-width: 150px; max-height: 150px; border: 1px solid #eee; padding: 5px;">
                </dd>

                <dt style="font-weight: bold; text-align: right; grid-column: 1; align-self: start;">비고:</dt>
                <dd style="grid-column: 2; white-space: pre-wrap; background-color: #f8f9fa; border: 1px solid #e9ecef; padding: 10px; min-height: 60px;"
                    id="view-equip-notes">-</dd>
            </dl>

            <div style="margin-top: 30px; text-align: center;">
                <button type="button" class="logout-button"
                    onclick="closeModal('view-equipment-details-modal')">닫기</button>
            </div>
        </div>
    </div>
    <div id="add-inspection-equip-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('add-inspection-equip-modal')">&times;</span>
            <form id="add-inspection-equip-form" enctype="multipart/form-data">
                <input type="hidden" id="edit-inspection-equip-id" name="itemIdToEdit">
                <h2>신규 검사장비 추가/수정</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="add-insp-equip-id">관리번호:</label> <input type="text" id="add-insp-equip-id"
                            name="itemCode" required>
                    </div>
                    <div class="form-group">
                        <label for="add-insp-equip-name">검사장비명:</label> <input type="text" id="add-insp-equip-name"
                            name="itemName" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-insp-equip-model">모델명/규격:</label> <input type="text" id="add-insp-equip-model"
                            name="itemSpec">
                    </div>
                    <div class="form-group">
                        <label for="add-insp-equip-manufacturer">제조사:</label>
                        <input type="text" id="add-insp-equip-manufacturer" name="manufacturer">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-insp-equip-cycle">교정주기:</label>
                        <input type="text" id="add-insp-equip-cycle" name="calibrationCycle"
                            placeholder="예: 12개월, 자체점검">
                    </div>
                    <div class="form-group">
                        <label for="add-insp-equip-last-cal">최종교정일:</label>
                        <input type="date" id="add-insp-equip-last-cal" name="lastCalibrationDate">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-insp-equip-reg-date">등록일:</label>
                        <input type="date" id="add-insp-equip-reg-date" name="registrationDate">
                        <small>(수정 시에는 보통 변경하지 않음)</small>
                    </div>
                    <div class="form-group">
                        <label for="add-insp-equip-status">교정 상태:</label>
                        <select id="add-insp-equip-status" name="calibrationStatus">
                            <option value="Normal">정상</option>
                            <option value="Scheduled">교정 예정</option>
                            <option value="Delayed">교정 지연</option>
                            <option value="Excluded">교정 제외</option>
                            <option value="Repair">수리중</option>
                        </select>
                    </div>
                </div>
                <div class="form-group full-width">
                    <label for="add-insp-equip-notes">비고:</label>
                    <textarea id="add-insp-equip-notes" name="notes" rows="2"></textarea>
                </div>
                <div class="form-group full-width">
                    <label for="add-insp-equip-image">이미지 등록:</label>
                    <input type="file" id="add-insp-equip-image" name="itemImage" accept="image/*">
                </div>
                <div style="margin-top: 25px; text-align: center;">
                    <button type="submit">저장</button>
                    <button type="button" class="logout-button"
                        onclick="closeModal('add-inspection-equip-modal')">취소</button>
                </div>
            </form>
        </div>
    </div>
    <div id="view-inspection-equip-details-modal" class="modal">
        <div class="modal-content large"> <span class="close-button"
                onclick="closeModal('view-inspection-equip-details-modal')">&times;</span>
            <h2>검사장비 상세 정보</h2>

            <dl
                style="display: grid; grid-template-columns: auto 1fr auto 1fr; gap: 8px 15px; margin-top: 15px; font-size: 0.95em;">
                <dt style="font-weight: bold; text-align: right;">ID:</dt>
                <dd id="view-insp-equip-id">-</dd>

                <dt style="font-weight: bold; text-align: right;">관리번호:</dt>
                <dd id="view-insp-equip-itemCode">-</dd>

                <dt style="font-weight: bold; text-align: right;">검사장비명:</dt>
                <dd id="view-insp-equip-itemName">-</dd>

                <dt style="font-weight: bold; text-align: right;">모델명/규격:</dt>
                <dd id="view-insp-equip-itemSpec">-</dd>

                <dt style="font-weight: bold; text-align: right;">제조사:</dt>
                <dd id="view-insp-equip-manufacturer">-</dd>

                <dt style="font-weight: bold; text-align: right;">단위:</dt>
                <dd id="view-insp-equip-itemUnit">-</dd>

                <dt style="font-weight: bold; text-align: right;">교정주기:</dt>
                <dd id="view-insp-equip-calibrationCycle">-</dd>

                <dt style="font-weight: bold; text-align: right;">교정 상태:</dt>
                <dd id="view-insp-equip-calibrationStatus" style="font-weight: bold;">-</dd>

                <dt style="font-weight: bold; text-align: right;">최종교정일:</dt>
                <dd id="view-insp-equip-lastCalibrationDate">-</dd>

                <dt style="font-weight: bold; text-align: right;">차기교정예정일:</dt>
                <dd id="view-insp-equip-nextCalibrationDate">-</dd>

                <dt style="font-weight: bold; text-align: right;">등록일:</dt>
                <dd id="view-insp-equip-registrationDate">-</dd>

                <dt style="font-weight: bold; text-align: right; grid-column: 1;">책임 부서:</dt>
                <dd id="view-insp-equip-resp-dept" style="grid-column: 2 / span 3;">-</dd>


                <dt style="font-weight: bold; text-align: right; grid-column: 1; align-self: center;">이미지:</dt>
                <dd style="grid-column: 2 / span 3;">
                    <img id="view-insp-equip-image" src="placeholder_item.png" alt="검사장비 이미지"
                        style="max-width: 150px; max-height: 150px; border: 1px solid #eee; padding: 5px;">
                </dd>

                <dt style="font-weight: bold; text-align: right; grid-column: 1; align-self: start;">비고:</dt>
                <dd style="grid-column: 2 / span 3; white-space: pre-wrap; background-color: #f8f9fa; border: 1px solid #e9ecef; padding: 10px; min-height: 60px;"
                    id="view-insp-equip-notes">-</dd>
            </dl>

            <div style="margin-top: 30px; text-align: center;">
                <button type="button" class="logout-button"
                    onclick="closeModal('view-inspection-equip-details-modal')">닫기</button>
            </div>
        </div>
    </div>

    <div id="add-purchase-request-modal" class="modal">
        <div class="modal-content"> <span class="close-button"
                onclick="closeModal('add-purchase-request-modal')">&times;</span>
            <h2>구매 요청 추가/수정</h2>

            <input type="hidden" id="edit-purchase-request-id" name="purchaseRequestIdToEdit">

            <div class="form-row">
                <div class="form-group">
                    <label for="pr-request-date">요청일자:</label>
                    <input type="date" id="pr-request-date" name="requestDate" required>
                </div>
                <div class="form-group">
                    <label for="pr-requester-dept">요청부서:</label>
                    <input type="text" id="pr-requester-dept" name="requestingDepartment" required>
                </div>
            </div>
            <div class="form-group full-width">
                <label for="pr-requester-name">요청자:</label>
                <input type="text" id="pr-requester-name" name="requesterName" readonly>
            </div>
            <hr>
            <h4>요청 품목</h4>
            <table id="pr-items-table" style="margin-top: 0;">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>품목</th>
                        <th>수량</th>
                        <th>단위</th>
                        <th>비고</th>
                        <th>관리</th>
                    </tr>
                </thead>
                <tbody id="pr-items-table-body"></tbody>
            </table>
            <button type="button" onclick="addPurchaseRequestItemRow()">+ 품목 추가</button>
            <hr>
            <div class="form-group full-width">
                <label for="pr-notes">요청 사유 / 비고:</label>
                <textarea id="pr-notes" name="notes" rows="3"></textarea>
            </div>

            <div style="margin-top: 25px; text-align: center;">
                <button type="submit">구매 요청 저장</button> <button type="button" class="logout-button"
                    onclick="closeModal('add-purchase-request-modal')">취소</button>
            </div>
        </div>
    </div>
    <div id="add-inventory-receipt-modal" class="modal">
        <div class="modal-content"> <span class="close-button"
                onclick="closeModal('add-inventory-receipt-modal')">&times;</span>
            <h2>입고 등록</h2>

            <input type="hidden" id="edit-receipt-id" name="receiptIdToEdit">
            <div class="form-row">
                <div class="form-group">
                    <label for="receipt-date">입고일자:</label>
                    <input type="date" id="receipt-date" name="receiptDate" required>
                </div>
                <div class="form-group">
                    <label for="receipt-supplier">공급처:</label>
                    <input type="text" id="receipt-supplier" name="supplierName" placeholder="공급처 검색...">
                    <input type="hidden" id="receipt-supplier-id" name="supplierId">
                </div>
            </div>
            <div class="form-group full-width">
                <label for="receipt-related-po">관련 발주번호:</label>
                <input type="text" id="receipt-related-po" name="relatedPurchaseOrder" placeholder="(선택 사항)">
            </div>
            <hr>
            <h4>입고 품목</h4>
            <table id="receipt-items-table" style="margin-top: 0;">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>품목</th>
                        <th>수량</th>
                        <th>단위</th>
                        <th>비고</th>
                        <th>관리</th>
                    </tr>
                </thead>
                <tbody id="receipt-items-table-body"></tbody>
            </table>
            <button type="button" onclick="addReceiptItemRow()">+ 품목 추가</button>
            <hr>
            <div class="form-group full-width">
                <label for="receipt-notes">비고:</label>
                <textarea id="receipt-notes" name="notes" rows="3"></textarea>
            </div>

            <div style="margin-top: 25px; text-align: center;">
                <button type="submit">입고 저장</button> <button type="button" class="logout-button"
                    onclick="closeModal('add-inventory-receipt-modal')">취소</button>
            </div>
        </div>
    </div>
    <div id="add-inventory-issue-modal" class="modal">
        <div class="modal-content"> <span class="close-button"
                onclick="closeModal('add-inventory-issue-modal')">&times;</span>
            <h2>출고 등록</h2>

            <input type="hidden" id="edit-issue-id" name="issueIdToEdit">
            <div class="form-row">
                <div class="form-group">
                    <label for="issue-date">출고일자:</label>
                    <input type="date" id="issue-date" name="issueDate" required>
                </div>
                <div class="form-group">
                    <label for="issue-type">출고 유형:</label>
                    <select id="issue-type" name="issueType" required>
                        <option value="">-- 선택 --</option>
                        <option value="Sales">판매 출고</option>
                        <option value="Production">생산 투입</option>
                        <option value="Sample">샘플 출고</option>
                        <option value="Discard">폐기</option>
                        <option value="Etc">기타</option>
                    </select>
                </div>
            </div>
            <div class="form-group full-width">
                <label for="issue-related-order">관련 주문/작업지시 번호:</label>
                <input type="text" id="issue-related-order" name="relatedOrder" placeholder="(선택 사항)">
            </div>
            <hr>
            <h4>출고 품목</h4>
            <table id="issue-items-table" style="margin-top: 0;">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>품목</th>
                        <th>수량</th>
                        <th>단위</th>
                        <th>비고</th>
                        <th>관리</th>
                    </tr>
                </thead>
                <tbody id="issue-items-table-body"></tbody>
            </table>
            <button type="button" onclick="addIssueItemRow()">+ 품목 추가</button>
            <hr>
            <div class="form-group full-width">
                <label for="issue-notes">비고:</label>
                <textarea id="issue-notes" name="notes" rows="3"></textarea>
            </div>

            <div style="margin-top: 25px; text-align: center;">
                <button type="submit">출고 저장</button> <button type="button" class="logout-button"
                    onclick="closeModal('add-inventory-issue-modal')">취소</button>
            </div>
        </div>
    </div>
    <div id="add-production-result-modal" class="modal">
        <div class="modal-content"> <span class="close-button"
                onclick="closeModal('add-production-result-modal')">&times;</span>
            <h2>생산 실적 등록</h2>

            <input type="hidden" id="edit-prod-result-id" name="prodResultIdToEdit">
            <div class="form-group full-width">
                <label for="prod-result-wo-num">관련 작업지시 번호:</label>
                <input type="text" id="prod-result-wo-num" name="workOrderNumber" required placeholder="작업지시 검색/선택">
                <input type="hidden" id="prod-result-wo-id" name="workOrderId">
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="prod-result-date">생산일자:</label>
                    <input type="date" id="prod-result-date" name="productionDate" required>
                </div>
                <div class="form-group">
                    <label for="prod-result-item">생산 품목:</label>
                    <input type="text" id="prod-result-item" name="itemName" readonly>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="prod-result-good-qty">양품 수량:</label>
                    <input type="number" id="prod-result-good-qty" name="goodQuantity" required min="0" step="1">
                </div>
                <div class="form-group">
                    <label for="prod-result-defect-qty">불량 수량:</label>
                    <input type="number" id="prod-result-defect-qty" name="defectQuantity" value="0" min="0" step="1">
                </div>
                <div class="form-group">
                    <label for="prod-result-unit">단위:</label>
                    <input type="text" id="prod-result-unit" name="itemUnit" readonly>
                </div>
            </div>
            <div class="form-group full-width">
                <label for="prod-result-worker">작업자:</label>
                <input type="text" id="prod-result-worker" name="workerName">
            </div>
            <div class="form-group full-width">
                <label for="prod-result-notes">비고:</label>
                <textarea id="prod-result-notes" name="notes" rows="3"></textarea>
            </div>

            <div style="margin-top: 25px; text-align: center;">
                <button type="submit">실적 저장</button> <button type="button" class="logout-button"
                    onclick="closeModal('add-production-result-modal')">취소</button>
            </div>
        </div>
    </div>
    <div id="add-customer-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('add-customer-modal')">&times;</span>
            <form id="add-customer-form">
                <input type="hidden" id="edit-customer-id" name="customerIdToEdit">
                <h2>신규 고객 추가/수정</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="add-cust-name">고객명:</label>
                        <input type="text" id="add-cust-name" name="customerName" required>
                    </div>
                    <div class="form-group">
                        <label for="add-cust-biz-num">사업자등록번호:</label>
                        <input type="text" id="add-cust-biz-num" name="businessRegNumber" placeholder="예: 123-45-67890">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="add-cust-ceo">대표자명:</label>
                        <input type="text" id="add-cust-ceo" name="ceoName">
                    </div>
                    <div class="form-group">
                        <label for="add-cust-tel">연락처:</label>
                        <input type="tel" id="add-cust-tel" name="phoneNumber" placeholder="예: 02-1234-5678">
                    </div>
                </div>

                <div class="form-group full-width">
                    <label for="add-cust-address">주소:</label>
                    <input type="text" id="add-cust-address" name="address">
                </div>

                <hr>

                <div class="form-row">
                    <div class="form-group">
                        <label for="add-cust-rep-id">담당자(자사):</label>
                        <select id="add-cust-rep-id" name="representativeUserId">
                            <option value="">-- 담당자 선택 --</option>
                        </select>
                        <small>(시스템에 등록된 사용자)</small>
                    </div>
                    <div class="form-group">
                        <label for="add-cust-status">상태:</label>
                        <select id="add-cust-status" name="status" required>
                            <option value="Active">활성</option>
                            <option value="Inactive">비활성</option>
                            <option value="Potential">잠재</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="add-cust-reg-date">등록일:</label>
                        <input type="date" id="add-cust-reg-date" name="registrationDate" style="width: 150px;">
                        <small>(수정 시 변경 불가)</small>
                    </div>
                    <div class="form-group">
                    </div>
                </div>

                <div class="form-group full-width">
                    <label for="add-cust-notes">비고:</label>
                    <textarea id="add-cust-notes" name="notes" rows="3" style="min-height: 60px;"></textarea>
                </div>

                <div style="margin-top: 25px; text-align: center;">
                    <button type="submit">저장</button>
                    <button type="button" class="logout-button" onclick="closeModal('add-customer-modal')">취소</button>
                </div>
            </form>
        </div>
    </div>
    <div id="manage-evaluation-criteria-modal" class="modal">
        <div class="modal-content large"> <span class="close-button"
                onclick="closeModal('manage-evaluation-criteria-modal')">&times;</span>
            <h2 id="manage-criteria-modal-title">평가 항목 관리: [양식명]</h2>
            <input type="hidden" id="manage-criteria-form-id">
            <div id="evaluation-criteria-management-area">
                <h4 style="margin-bottom: 10px;">평가 구분 및 항목</h4>
                <button type="button" onclick="addEvaluationCategoryRow()"
                    style="margin-bottom: 10px; background-color:#6c757d; color:white; border:none; padding: 5px 10px; border-radius:3px;">+
                    평가 구분 추가</button>

                <div id="evaluation-criteria-list"
                    style="max-height: 400px; overflow-y: auto; border: 1px solid #dee2e6; padding: 15px; border-radius: 4px;">
                    <p>평가 항목을 추가해주세요.</p>
                </div>
                <div style="text-align: right; margin-top: 10px; font-weight: bold;">
                    총 배점: <span id="total-criteria-score">0</span> 점
                </div>
            </div>

            <div style="margin-top: 30px; text-align: center;">
                <button type="button" onclick="saveEvaluationCriteria()">평가 항목 저장</button>
                <button type="button" class="logout-button"
                    onclick="closeModal('manage-evaluation-criteria-modal')">닫기</button>
            </div>
        </div>
    </div>
    <div id="add-evaluation-form-modal" class="modal">
        <div class="modal-content small"> <span class="close-button"
                onclick="closeModal('add-evaluation-form-modal')">&times;</span>
            <h2 id="evaluation-form-modal-title">새 평가 양식 추가</h2> <input type="hidden" id="edit-evaluation-form-id"
                name="evaluationFormIdToEdit">
            <div class="form-group full-width">
                <label for="add-eval-form-code">양식 ID/코드:</label>
                <input type="text" id="add-eval-form-code" name="formCode" required placeholder="예: EVAL-SUP-REGULAR">
            </div>

            <div class="form-group full-width">
                <label for="add-eval-form-name">평가 양식명:</label>
                <input type="text" id="add-eval-form-name" name="formName" required>
            </div>

            <div class="form-group full-width">
                <label for="add-eval-form-desc">설명:</label>
                <textarea id="add-eval-form-desc" name="description" rows="3"></textarea>
            </div>

            <div style="margin-top: 25px; text-align: center;">
                <button type="submit">저장</button> <button type="button" class="logout-button"
                    onclick="closeModal('add-evaluation-form-modal')">취소</button>
            </div>
        </div>
    </div>
    <div id="add-document-modal" class="modal">
        <div class="modal-content"> <span class="close-button" onclick="closeModal('add-document-modal')">&times;</span>
            <h2 id="document-modal-title">신규 문서 추가</h2>
            <form id="add-document-form" enctype="multipart/form-data">
                <input type="hidden" id="edit-document-id" name="documentIdToEdit"> <input type="hidden"
                    id="document-type" name="documentType">
                <div class="form-row">
                    <div class="form-group">
                        <label for="doc-number">문서번호:</label>
                        <input type="text" id="doc-number" name="documentNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="doc-version">버전:</label>
                        <input type="text" id="doc-version" name="version" value="1.0" required>
                    </div>
                </div>
                <div class="form-group full-width">
                    <label for="doc-title">문서 제목:</label>
                    <input type="text" id="doc-title" name="title" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="doc-revision-date">개정일자:</label>
                        <input type="date" id="doc-revision-date" name="revisionDate" required>
                    </div>
                    <div class="form-group">
                        <label for="doc-author">작성자:</label>
                        <input type="text" id="doc-author" name="authorName" readonly>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label for="doc-file">문서 파일 첨부:</label>
                    <input type="file" id="doc-file" name="documentFile">
                </div>

                <div class="form-group full-width">
                    <label for="doc-notes">비고 / 개정 사유:</label>
                    <textarea id="doc-notes" name="notes" rows="3"></textarea>
                </div>

                <div style="margin-top: 25px; text-align: center;">
                    <button type="submit">문서 저장</button>
                    <button type="button" class="logout-button" onclick="closeModal('add-document-modal')">취소</button>
                </div>
            </form>
        </div>
    </div>
    <script src="js/script.js"></script>

</body>
</html>